{"version":3,"sources":["serviceWorker.js","store/reducers/user.js","store/reducers/photos.js","store/reducers/collections.js","store/reducers/gallery.js","store/reducers/settings.js","store/reducers/index.js","store/index.js","store/actions/user.js","store/actions/photos.js","store/actions/collections.js","store/actions/gallery.js","store/actions/settings.js","store/actions/tasks.js","store/actions/index.js","components/sidebar.js","components/modal.js","components/header.js","components/addCollection.js","components/upload.js","components/Lazyloading.js","pages/Main.js","pages/Login.js","components/settings/RegistrationForm.js","components/settings/ProfileForm.js","components/settings/EditableTagGroup.js","components/settings/SettingsForm.js","components/settings/maintenance.js","components/settings/AlbumSettings.js","pages/Settings.js","index.js"],"names":["Boolean","window","location","hostname","match","initialState","loggedIn","loginFailed","token","localStorage","getItem","email","username","photos","isUpdating","collections","dates","uploadDates","addCollectionModalVisable","uploadModalVisable","imageSize","stats","profile","gallery","combineReducers","UserReducer","state","action","type","console","log","loggingIn","auth","CollectionsReducer","PhotoReducer","GalleryReducer","size","SettingsReducer","history","createBrowserHistory","basename","process","config","baseUrl","imageUrl","loggerMiddleware","createLogger","formatTree","element","Object","keys","key","title","name","value","id","children","values","IDFromTree","tree","split","shift","el","forEach","k","parseInt","userActions","login","password","dispatch","payload","axios","post","then","response","data","setItem","setUserDetails","push","logout","catch","err","reauth","get","getOptions","update","user","removeItem","photoActions","getAll","edit","photo","notify","collectionActions","create","collection","result","move","remove","photoID","delete","upload","albums","galleryActions","showAdd","hideAdd","showUpload","hideUpload","changeImageSize","settingsActions","all","galleryUpdated","profileUpdated","setProfile","setGallery","statsUpdated","taskActions","purge","clear","backup","content","fileName","contentType","a","document","createElement","file","Blob","JSON","stringify","href","URL","createObjectURL","download","click","headers","Authorization","description","message","notification","duration","Panel","Sider","Option","defaultState","meta","exif","SideBar","props","timer","handleChange","evt","clearTimeout","target","checked","setState","setTimeout","triggerChange","handleKeyDown","e","keyCode","handleVisablityChange","handleCollectionChange","nextProps","undefined","this","formItemLayout","labelCol","xs","span","sm","wrapperCol","width","formatDate","date","moment","format","style","overflow","height","src","alt","bordered","defaultActiveKey","header","Item","label","onChange","onKeyDown","caption","album","treeData","placeholder","hasFeedback","visibility","DateTaken","DateAdded","DateModified","React","PureComponent","connect","confirm","ButtonGroup","Group","CollectionCreateForm","normFile","Array","isArray","fileList","visible","onCancel","onCreate","getFieldDecorator","form","okText","onOk","layout","rules","required","Component","MoveModal","handleCancel","handleCreate","formRef","validateFields","selectedPhotos","resetFields","saveFormRef","showModal","_this","float","onClick","okType","cancelText","wrappedComponentRef","Header","SubMenu","Search","HeaderComponent","search","className","padding","to","pathname","theme","mode","selectable","marginTop","shape","s","L","d","K","G","I","F","H","x","u","aa","Z","r","f","q","D","p","t","n","B","toString","substr","length","C","P","h","E","v","g","Y","X","W","V","charCodeAt","replace","String","fromCharCode","J","toLowerCase","MD5","withRouter","enableUpload","AddCollection","customRequest","options","FormData","append","res","onSuccess","valuePropName","getValueFromEvent","Dragger","multiple","listType","disabled","UploadCollection","select","map","preloadedState","placeHolder","Image","styled","img","LazyImage","useState","imageSrc","setImageSrc","imageRef","setImageRef","useEffect","observer","didCancel","IntersectionObserver","entries","entry","intersectionRatio","isIntersecting","unobserve","threshold","rootMargin","observe","ref","onLoad","event","classList","add","onError","Content","Footer","DirectoryTree","Main","_handleKeyDown","selectedPhoto","selectedElements","selectPhoto","stopPropagation","findIndex","clearSelection","onCollapse","collapsed","handleSelection","indexes","getStyle","index","find","border","margin","textAlign","handleSizeChange","addElementRef","elRefs","filter","onTreeSelect","selectedKeys","info","filterPhotos","item","uploaded_filter","sort","reverse","addEventListener","removeEventListener","elements","onSelectionChange","lowercasedFilter","filteredData","includes","selectMessage","minHeight","collapsible","overflowY","defaultSelectedKeys","onSelect","defaultExpandedKeys","expandedKeys","draggable","blockNode","backgroundColor","position","bottom","gutter","renderSelection","zIndex","borderBottom","lineHeight","defaultValue","Button","handleSubmit","preventDefault","onDone","onSubmit","prefix","color","showIcon","closable","htmlType","Login","redirectToReferrer","changeRoute","justify","align","RegistrationForm","confirmDirty","autoCompleteResult","validateFieldsAndScroll","handleConfirmBlur","compareToFirstPassword","rule","callback","force","getFieldValue","validateToNextPassword","handleWebsiteChange","domain","tailFormItemLayout","offset","validator","Password","onBlur","mapPropsToFields","createFormField","ProfileForm","settings","ProfilePhoto","BackgroundPhoto","Description","Twitter","Instagram","Website","EditableTagGroup","handleClose","removedTag","tags","tag","removedTags","concat","showInput","inputVisible","input","focus","handleInputChange","inputValue","handleInputConfirm","indexOf","saveInputRef","isLongTag","tagElem","onClose","slice","onPressEnter","background","borderStyle","prevState","intersection","SettingsForm","min","max","Name","Basepath","Url","ImagesPerPage","PictureBlacklist","AlbumBlacklist","Renderer","Maintenance","showResacanConfirm","showClearConfirm","status","success","error","url","icon","AlbumSettings","albumName","albumPic","albumID","profile_image","alb","updateAlbumName","showSearch","optionFilterProp","filterOption","option","tabListNoTitle","tab","contentListNoTitle","maintenance","Settings","onTabChange","noTitleKey","Photos","precision","valueStyle","Albums","Rubish","tabList","activeTabKey","bodyStyle","PrivateRoute","component","rest","render","from","NoMatch","AppComponent","counter","tick","setInterval","clearInterval","path","exact","App","ReactDOM","store","createStore","rootReducer","applyMiddleware","thunkMiddleware","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b765ba06.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","\nconst initialState = { \n  loggedIn: true, \n  loginFailed: false,\n  token: localStorage.getItem('token') || \"\", \n  email: localStorage.getItem('email') || \"\", \n  username: localStorage.getItem('username') || \"\" \n};\n\nexport function UserReducer(state = initialState, action) {\n  switch (action.type) {\n    case 'LOGIN_SUCCESS':\n      console.log(\"UDPATING USER SETTINGS\")\n      return {\n        loggingIn: true,\n        token: action.token,\n        username:  action.username,\n        email:  action.email,\n        loginFailed: false\n      };\n    case 'LOGOUT_SUCCESS':\n      return {\n        auth: false,\n        loginFailed: false\n      };\n    case 'LOGOUT_FAILED':\n    return {\n      auth: false,\n      loginFailed: true\n    };\n    default:\n      return state\n  }\n}","\nconst initialState = {\n    photos: [],\n    isUpdating: false\n};\n\nexport function PhotoReducer(state = initialState, action) {\n    switch (action.type) {\n        case 'PHOTO_FETCHING':\n            return {\n            ...state,\n            isUpdating: true\n            };\n        case 'PHOTO_RECEIVED':\n            return {\n                ...state,\n                isUpdating: false,\n                photos: action.photos\n            };\n        default:\n            return state\n    }\n  }","const initialState = {\n    collections: {},\n    dates: [],\n    uploadDates: [],\n    isUpdating: false\n};\n\nexport function CollectionsReducer(state = initialState, action) {\n    switch (action.type) {\n        case 'COLLECTIONS_FETCHING':\n            return {\n            ...state,\n            isUpdating: true\n            };\n        case 'COLLECTIONS_RECEIVED':\n            return {\n                ...state,\n                isUpdating: false,\n                collections: action.collections,\n                dates: action.dates,\n                uploadDates: action.uploadDates\n            };\n        default:\n            return state\n    }\n  }","\nconst initialState = {\n    addCollectionModalVisable: false,\n    uploadModalVisable: false,\n    imageSize: \"4\"\n};\n\nexport function GalleryReducer(state = initialState, action) {\n    switch (action.type) {\n        case 'SHOW_ADD_MODAL':\n            return {...state, addCollectionModalVisable: true };\n        case 'HIDE_ADD_MODAL':\n                return {...state, addCollectionModalVisable: false };\n        case 'SHOW_UPLOAD_MODAL':\n            return {...state, uploadModalVisable: true };\n        case 'HIDE_UPLOAD_MODAL':\n                return {...state, uploadModalVisable: false };\n        case 'CHANGE_IMAGE_SIZE':\n            return {...state, imageSize: action.size};\n        default:\n            return state\n    }\n  }","\nconst initialState = {\n  stats: {},\n  profile:{},\n  gallery:{},\n  isUpdating: false\n};\n\nexport function SettingsReducer(state = initialState, action) {\n  switch (action.type) {\n    case 'STATS_FETCHING':\n      return {\n        ...state,\n        isUpdating: true\n      };\n    case 'STATS_UPDATED':\n      return {\n        ...state,\n        isUpdating: false,\n        stats: action.stats\n      };\n    case 'PROFILE_UPDATED':\n      return {\n        ...state,\n        isUpdating: false,\n        profile: action.profile\n      }\n    case 'GALLERY_UPDATED':\n      return {\n        ...state,\n        isUpdating: false,\n        gallery: action.gallery\n      };\n    default:\n      return state\n  }\n}","import { combineReducers } from 'redux'\n\nimport {UserReducer} from './user'\nimport {PhotoReducer} from './photos'\nimport {CollectionsReducer} from './collections'\nimport {GalleryReducer} from './gallery'\nimport {SettingsReducer} from './settings'\n\nexport default combineReducers({\n    UserReducer,\n    CollectionsReducer,\n    PhotoReducer,\n    GalleryReducer,\n    SettingsReducer\n  })","import { createStore, applyMiddleware } from 'redux'\nimport rootReducer from './reducers'\n\nimport thunkMiddleware from 'redux-thunk'\nimport { createLogger } from 'redux-logger'\n\nimport { createBrowserHistory } from 'history';\n\nexport const history = createBrowserHistory({\n  basename: process.env.PUBLIC_URL\n});\n\nconst Constants = {\n  prod : {\n    baseUrl: \"/api/admin\",\n    imageUrl: \"/img/\"\n   },\n   dev : {\n    baseUrl: \"http://localhost:8800/api/admin\",\n    imageUrl: \"http://localhost:8800/img/\"\n   }\n}\nexport const config = process.env.NODE_ENV === 'development' ? Constants[\"dev\"] :Constants[\"prod\"];\n\nconst loggerMiddleware = createLogger()\nexport default function configureStore(preloadedState) {\n    return createStore(\n      rootReducer,\n      preloadedState,\n      applyMiddleware(thunkMiddleware, loggerMiddleware)\n    )\n  }\n\nexport function formatTree(element){\n    const keys = Object.keys(element)\n    for (const key of keys) {\n      //console.log(element[key].id)\n      element[key].title = element[key].name\n      element[key].value = element[key].id\n      \n      formatTree(element[key].children)\n      element[key].children = Object.values(element[key].children)\n    }\n  }\n\nexport function IDFromTree(collections, key){\n  formatTree(collections)\n  let tree = Object.values(collections)\n\n  key = key.split(\"-\")\n  key.shift()\n  let el = {children:tree}\n  key.forEach(k => {\n    el = el.children[parseInt(k)]\n  })\n  return el\n}","\nimport axios from 'axios';\nimport { history, config} from '../index';\nimport {getOptions} from './index'\nexport const userActions = {\n    login,\n    reauth,\n    logout,\n    update\n};\n\nfunction login(username, password){\n    console.log('login: ', username);\n    return dispatch => {\n        let payload = {\n            username: username,\n            password: password\n        }\n        console.log('dispathc: ', username);\n        axios.post(config.baseUrl+\"/login\", payload).then((response)=>{\n            console.log(response.data);\n            if (response.data.token) {\n                localStorage.setItem('token', response.data.token);\n                localStorage.setItem('email', response.data.email);\n                localStorage.setItem('username', response.data.username);\n                dispatch(setUserDetails(response.data));\n                console.log(\"push history \");\n                history.push('/');\n            }else{\n                dispatch(logout())\n            }\n        }).catch((err)=>{\n            dispatch(logoutFailedUser())\n        })\n    };\n}\nfunction update(user){\n    return dispatch => {\n        axios.post(config.baseUrl+\"/auth/update\", user, getOptions()).then((response)=>{\n            \n            localStorage.setItem('email', response.data.email);\n            localStorage.setItem('username', response.data.username);\n            dispatch(setUserDetails(response.data));\n            \n        }).catch((err)=>{\n            console.log(\"Error in response\");\n            console.log(err);\n        })\n    };\n}\n\n\nfunction reauth(){\n    return dispatch => {\n        axios.get(config.baseUrl+\"/authorised\",getOptions()).then((response)=>{\n            if (response.data.token) {\n                localStorage.setItem('token', response.data.token);\n                localStorage.setItem('email', response.data.email);\n                localStorage.setItem('username', response.data.username);\n                \n            }\n        }).catch((err)=>{\n            console.log(\"Error in response\");\n            console.log(err);\n            dispatch(logout());\n        })\n    };\n}\n\nfunction logout(){\n    return dispatch => {\n        localStorage.removeItem('email');\n        localStorage.removeItem('token');\n        localStorage.removeItem('username');\n        dispatch(logoutUser());\n        history.push('/');\n    }\n}\n\nexport function setUserDetails(user){\n    return{\n        type: \"LOGIN_SUCCESS\",\n        email: user.email,\n        username: user.username,\n        token: user.token\n    }\n}\n\nexport function logoutFailedUser(){\n    return{\n        type: \"LOGOUT_FAILED\",\n    }\n}\nexport function logoutUser(){\n    return{\n        type: \"LOGOUT_SUCCESS\",\n        auth: false,\n        email: '',\n        token: ''\n    }\n}","\nimport axios from 'axios';\nimport {getOptions, notify} from './index';\nimport {config} from '../index';\n\nexport const photoActions = {\n    getAll,\n    edit\n};\n\nfunction getAll(){\n    return dispatch => {\n        dispatch(photoUpdating());\n        axios.get(config.baseUrl+\"/photos\", getOptions()).then((response)=>{\n            console.log(response.data);\n            dispatch(setPhotoDetails(response.data));\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    }\n\n}\n\nfunction edit(photo){\n    return dispatch => {\n        dispatch(photoUpdating());\n        axios.post(config.baseUrl+\"/photo/\"+photo.id, photo, getOptions()).then((response)=>{\n            notify(\"success\", \"Photo edited successfully\")\n            dispatch(getAll(response.data));\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    }\n}\n\nfunction photoUpdating(){\n    return{\n        type: \"PHOTO_FETCHING\"\n    }\n}\n\nfunction setPhotoDetails(photos){\n    return{\n        type: \"PHOTO_RECEIVED\",\n        photos: photos,\n    }\n}\n\n","\nimport axios from 'axios';\nimport {getOptions, notify} from './index';\nimport {config} from '../index';\n\nimport {photoActions} from './photos'\nexport const collectionActions = {\n    getAll,\n    create,\n    move,\n    remove,\n    upload,\n    update\n};\n\nfunction getAll(){\n    return dispatch => {\n        dispatch(collectionUpdating());\n        axios.get(config.baseUrl+\"/collections\", getOptions()).then((response)=>{\n            console.log(response.data);\n            dispatch(setPhotoDetails(response.data));\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    }\n};\n\nfunction update (collection){\n    return dispatch => {\n        axios.post(config.baseUrl + '/collection/'+collection.id, collection, getOptions()).then(result => {\n            dispatch(getAll());\n            notify(\"success\", \"Collections updated successfully\")\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    }\n}\n\nfunction create (collection) {\n    return dispatch => {\n        axios.post(config.baseUrl + '/collection',  collection, getOptions()).then(result => {\n            dispatch(getAll());\n            notify(\"success\", \"Collections created successfully\")\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    }\n}\n\nfunction upload(collection) {\n    return dispatch => {\n        axios.post(config.baseUrl + '/collection/upload',  collection, getOptions()).then(result => {\n            dispatch(photoActions.getAll());\n            notify(\"success\", \"Collections uploaded successfully\")\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    }\n}\n\nfunction move (collection){\n    return dispatch => {\n        axios.post(config.baseUrl + '/collection/move',  collection, getOptions()).then(result => {\n            dispatch(photoActions.getAll());\n            notify(\"success\", \"Photo deleted successfully\")\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    }\n}\n\nfunction remove (photoID){\n    return dispatch => {\n        axios.delete(config.baseUrl + '/photo/'+photoID, getOptions()).then(result => {\n            dispatch(photoActions.getAll());\n            notify(\"success\", \"Collections moved successfully\")\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    }\n}\n\n\nfunction collectionUpdating(){\n    return{\n        type: \"COLLECTION_FETCHING\"\n    }\n}\n\nfunction setPhotoDetails(data){\n    return{\n        type: \"COLLECTIONS_RECEIVED\",\n        collections: data.albums,\n        dates: [...data.dates],\n        uploadDates: [...data.uploadDates]\n    }\n}\n\n","\nexport const galleryActions = {\n    showAdd,\n    hideAdd,\n    showUpload,\n    hideUpload,\n    changeImageSize\n};\n\nfunction showAdd(){\n    return{type: \"SHOW_ADD_MODAL\"}\n}\n\nfunction showUpload(){\n    return{type: \"SHOW_UPLOAD_MODAL\"}\n}\n\nfunction hideAdd(){\n    return{type: \"HIDE_ADD_MODAL\"}\n}\n\nfunction hideUpload(){\n    return{type: \"HIDE_UPLOAD_MODAL\"}\n}\n\nfunction changeImageSize(size){\n    const type = \"CHANGE_IMAGE_SIZE\"\n    return{type: type, size: size}\n        \n   \n}\n","\nimport axios from 'axios';\nimport {config} from '../index';\nimport {getOptions, notify} from './index';\nexport const settingsActions = {\n    stats,\n    all,\n    setProfile,\n    setGallery\n};\n\nfunction all(){\n    return dispatch => {\n        dispatch(stats())\n        dispatch(gallery())\n        dispatch(profile())\n    }\n}\nfunction stats(){\n    return dispatch => {\n        axios.get(config.baseUrl+\"/settings/stats\",getOptions()).then((response)=>{\n           dispatch(statsUpdated(response.data))\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    };\n}\nfunction profile(){\n    return dispatch => {\n        axios.get(config.baseUrl+\"/settings/profile\",getOptions()).then((response)=>{\n           dispatch(profileUpdated(response.data))\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    };\n}\nfunction gallery(){\n    return dispatch => {\n        axios.get(config.baseUrl+\"/settings/gallery\",getOptions()).then((response)=>{\n           dispatch(galleryUpdated(response.data))\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    };\n}\n\n\nfunction setProfile(profile){\n    return dispatch => {\n        axios.post(config.baseUrl+\"/settings/profile\", profile ,getOptions()).then((response)=>{\n           dispatch(profileUpdated(response.data))\n           notify(\"success\", \"Profile edited successfully\")\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    };\n}\nfunction setGallery(gallery){\n    return dispatch => {\n        axios.post(config.baseUrl+\"/settings/gallery\", gallery, getOptions()).then((response)=>{\n           dispatch(galleryUpdated(response.data))\n           notify(\"success\", \"Gallery edited successfully\")\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    };\n}\n\n\n\nfunction statsUpdated(stats){\n    return{\n        type: \"STATS_UPDATED\",\n        stats: stats\n    }\n}\nfunction profileUpdated(profile){\n    return{\n        type: \"PROFILE_UPDATED\",\n        profile: profile\n    }\n}\nfunction galleryUpdated(gallery){\n    return{\n        type: \"GALLERY_UPDATED\",\n        gallery: gallery\n    }\n}\n\n","\nimport axios from 'axios';\nimport {config} from '../index';\nimport {getOptions, notify} from './index';\n\nexport const taskActions = {\n    purge,\n    clear,\n    backup\n};\n\nfunction download(content, fileName, contentType) {\n    var a = document.createElement(\"a\");\n    var file = new Blob([JSON.stringify(content,null,2)], {type: contentType});\n    a.href = URL.createObjectURL(file);\n    a.download = fileName;\n    a.click();\n}\n\nfunction purge(){\n    return dispatch => {\n        axios.get(config.baseUrl+\"/tasks/purge\",getOptions()).then((response)=>{\n            notify(\"success\", \"Rescan task started\")\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    };\n}\nfunction clear(){\n    return dispatch => {\n        axios.get(config.baseUrl+\"/tasks/clear\",getOptions()).then((response)=>{\n            notify(\"success\", \"Clear task started\")\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    };\n}\n\nfunction backup(){\n    return dispatch => {\n        axios.get(config.baseUrl+\"/tasks/backup\",getOptions()).then((response)=>{\n            download(response.data, 'galleryBackup.txt', 'text/plain');\n        }).catch((err)=>{\n            notify(\"warning\", \"Error from server: \"+err)\n        })\n    };\n}","import { notification } from 'antd';\n\nexport * from './user';\nexport * from './photos';\nexport * from './collections';\nexport * from './gallery';\nexport * from './settings';\nexport * from './tasks';\n\nexport function getOptions(){\n  if(localStorage.getItem('token')){\n      return{headers: {Authorization:localStorage.getItem('token')}}\n  }\n}\n\nexport function notify(type, description){\n  let message = \"\"\n  switch(type){\n    case \"warning\": message = \"Oh dear something went wong!\"; break\n    default: message = \"Completed successfully\" ; break\n  }\n\n  notification[type]({\n    message: message,\n    description: description,\n    duration: 5,\n  });\n}","import React from 'react';\n// as an array\nimport { Layout, Form,  Input,  Select, TreeSelect } from 'antd';\nimport { Collapse } from 'antd';\nimport moment from 'moment';\n\nimport { connect } from 'react-redux';\nimport { config, formatTree } from '../store';\nimport { photoActions } from '../store/actions';\n\n\nconst { Panel } = Collapse;\nconst { Sider } = Layout;\nconst { Option } = Select;\nconst WAIT_INTERVAL = 2000\nconst ENTER_KEY = 13\nconst defaultState = {\n  meta:{},\n  exif:{}\n}\n\nclass SideBar extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    // if (props.data !== undefined){\n    //     this.state = { data : props.data}\n    // } else {\n      this.state = {data: defaultState}\n  }\n  timer = null\n  componentWillReceiveProps(nextProps) {\n    // You don't have to do this check first, but it can help prevent an unneeded render\n    if(nextProps.data === undefined){\n        this.setState({data: defaultState});   \n      return\n    }\n    if (nextProps.data !== this.state.data) {\n      if(nextProps.data.meta === undefined){\n        this.setState({data: defaultState});   \n      }else{\n        this.setState({data: nextProps.data});\n      }\n    }\n  }\n\n handleChange = (evt) => {\n    clearTimeout(this.timer)\n    const value = evt.target.type === \"checkbox\" ? evt.target.checked : evt.target.value;\n    var data = {...this.state.data}\n    data[evt.target.name] = value\n    this.setState({data});\n    this.timer = setTimeout( () => this.triggerChange(data), WAIT_INTERVAL)\n  }\n\n  triggerChange = (data) => {\n    console.log(\"CHANGFE TRIGGERED\")\n    this.props.dispatch(photoActions.edit(data))\n  }\n\n  \n   handleKeyDown = e => {\n    if (e.keyCode === ENTER_KEY) {\n      clearTimeout(this.timer)\n      this.triggerChange(this.state.data)\n    }\n  }\n \n  handleVisablityChange = (value) => {\n    var data = {...this.state.data}\n    data.meta[\"visibility\"] = value\n    this.setState({data});\n    this.triggerChange(data)\n  }\n   handleCollectionChange = value => {\n     console.log(value)\n    var data = {...this.state.data}\n    data[\"album\"] = value\n    this.setState({data});\n    this.triggerChange(data)\n   }\n\n  render() {\n    const formItemLayout = {\n        labelCol: {\n          xs: { span: 24 },\n          sm: { span: 8 },\n        },\n        wrapperCol: {\n          xs: { span: 24 },\n          sm: { span: 16 },\n        },\n      };\n      let width = 300;\n      if (this.state.data.name === undefined) {\n        width = 0;\n      }\n\n\n      function formatDate(date){\n        let formattedDate = moment(date, \"YYYY-MM-DD'T'HH:mm:SSZ\").format(\"DD-MM-YYYY HH:mm A\");\n        return formattedDate;\n      }\n  \n    formatTree(this.props.collections)\n    const collections = Object.values(this.props.collections)\n    return (\n          <Sider width={width} style={{ overflow: \"auto\", height: \"calc(100vh - 64px)\" }}>\n            <img src={config.imageUrl+this.state.data.id+\"?size=tiny&token=\"+localStorage.getItem('token')} width=\"100%\" alt=\"thumbnail\" />\n            <Form {...formItemLayout}>\n              <Collapse bordered={false} defaultActiveKey={['1', '2', '3']}>\n                <Panel header=\"Properties\" key=\"1\">\n                  <Form.Item label=\"id\">\n                    {this.state.data.id} \n                  </Form.Item>\n                  <Form.Item label=\"Title\">\n                    <Input value={this.state.data.name}  name=\"name\" onChange={this.handleChange}  onKeyDown={this.handleKeyDown}/>\n                  </Form.Item>\n                  <Form.Item label=\"Caption\">\n                    <Input value={this.state.data.caption} name=\"caption\" onChange={this.handleChange}  onKeyDown={this.handleKeyDown}/>\n                  </Form.Item>\n                  <Form.Item label=\"Collection\">\n                  <TreeSelect\n                    value={this.state.data.album}\n                    treeData={collections}\n                    placeholder=\"Select Collection\"\n                    onChange={this.handleCollectionChange}\n                  />          \n                  </Form.Item>\n                </Panel>\n                <Panel header=\"Visability\" key=\"2\">\n                  <Form.Item label=\"Access\" hasFeedback>\n                    <Select placeholder=\"Please select a country\" value={this.state.data.meta.visibility} name=\"visibility\" onChange={this.handleVisablityChange}>\n                      <Option value=\"PUBLIC\">PUBLIC</Option>\n                      <Option value=\"HIDDEN\">HIDDEN</Option>\n                      <Option value=\"PRIVATE\">PRIVATE</Option>\n                    </Select>\n                  </Form.Item>\n                  <Form.Item label=\"link\">\n                   <a href={\"/photo/\"+this.state.data.id}>{this.state.data.name} </a>\n                  </Form.Item>\n                </Panel>\n                <Panel header=\"History\" key=\"3\">\n                  <Form.Item label=\"Captured\">\n                  {formatDate(this.state.data.exif.DateTaken)}\n                  </Form.Item>\n                  <Form.Item label=\"Uploaded\">\n                  {formatDate(this.state.data.meta.DateAdded)}\n                  </Form.Item>\n                  <Form.Item label=\"Modified\">\n                  {formatDate(this.state.data.meta.DateModified)}\n                  </Form.Item>\n                </Panel>\n              </Collapse>\n            </Form>\n          </Sider>\n    );\n  }\n}\nconst mapToProps = (state) =>{\n  const photos = state.PhotoReducer.photos;\n  const dates = state.CollectionsReducer.dates\n  const uploadDates = state.CollectionsReducer.uploadDates\n  const collections = state.CollectionsReducer.collections\n  return {\n    photos,\n    dates,\n    collections,\n    uploadDates\n  };\n}\nexport default connect(mapToProps)(SideBar);\n","import React from 'react';\nimport { Modal, Button, Icon, Form, TreeSelect } from 'antd';\n\nimport { connect } from 'react-redux';\nimport { collectionActions } from '../store/actions';\nimport { formatTree } from '../store';\n\nconst { confirm } = Modal;\nconst ButtonGroup = Button.Group;\n\n\n\nconst CollectionCreateForm = Form.create({ name: 'form_in_modal' })(\n  // eslint-disable-next-line\n  class extends React.Component {\n    normFile = e => {\n      console.log('Upload event:', e);\n      if (Array.isArray(e)) {\n        return e;\n      }\n      return e && e.fileList;\n    };\n    render() {\n      const { visible, onCancel, onCreate, form } = this.props;\n      const { getFieldDecorator } = form;\n\n      formatTree(this.props.collections)\n      const collections = Object.values(this.props.collections)\n      return (\n        <Modal\n          visible={visible}\n          title=\"Move photos to collections\"\n          okText=\"Move Photos\"\n          onCancel={onCancel}\n          onOk={onCreate}\n        >\n          <Form layout=\"vertical\">\n            <Form.Item label=\"Choose collection\" hasFeedback>\n              {getFieldDecorator('album', {\n                rules: [{ required: true, message: 'Please select the collection to upload photos to!' }],\n              })(\n                <TreeSelect\n                    treeData={collections}\n                    placeholder=\"Select Collection\"\n                    onChange={this.handleCollectionChange}\n                  />\n                \n              )}\n            </Form.Item>\n          </Form>\n        </Modal>\n      );\n    }\n  },\n);\n\nclass MoveModal extends React.Component {\n  constructor(){\n    super();\n    this.state = {visible: false}\n  }\n  handleCancel = () => {\n    this.setState({visible: false})\n  };\n\n  handleCreate = () => {\n    const { form } = this.formRef.props;\n    form.validateFields((err, values) => {\n      if (err) {\n        return;\n      }\n      \n      values[\"photos\"] = this.props.selectedPhotos\n      form.resetFields();\n      console.log('Received values of form: ', values);\n      this.props.dispatch(collectionActions.move(values))\n      this.setState({visible: false})\n    });\n  };\n\n  saveFormRef = formRef => {\n    this.formRef = formRef;\n  };\n\n  showModal = () => {\n    this.setState({\n      visible: true,\n    });\n  };\n\n  render() {\n    let _this = this\n    function showDeleteConfirm() {\n      confirm({\n        title: 'Are you sure delete these photos?',\n        content: '',\n        okText: 'Yes',\n        okType: 'danger',\n        cancelText: 'No',\n        onOk() {\n          _this.props.selectedPhotos.forEach(photo => {\n            _this.props.dispatch(collectionActions.remove(photo.id))\n          })\n          \n          console.log('OK');\n        },\n        onCancel() {\n          console.log('Cancel');\n        },\n      });\n    }\n    return (\n      <div>\n            <ButtonGroup style={{ float: \"left\" }}>\n                <Button onClick={this.showModal}><Icon type=\"container\" />move</Button>\n                <Button onClick={showDeleteConfirm} ><Icon type=\"delete\" />delete</Button>\n              </ButtonGroup>\n\n        <CollectionCreateForm\n          wrappedComponentRef={this.saveFormRef}\n          visible={this.state.visible}\n          onCancel={this.handleCancel}\n          onCreate={this.handleCreate}\n          collections ={this.props.collections}\n        />\n        </div>\n    );\n  }\n}\nconst mapToProps = (state) =>{\n  const photos = state.PhotoReducer.photos;\n  const dates = state.CollectionsReducer.dates\n  const uploadDates = state.CollectionsReducer.uploadDates\n  const collections = state.CollectionsReducer.collections\n  return {\n    photos,\n    dates,\n    collections,\n    uploadDates\n  };\n}\nexport default connect(mapToProps)(MoveModal)\n","import React from 'react';\n// as an array\nimport { Layout, Menu,  Input,  Avatar, Icon } from 'antd';\nimport { connect } from 'react-redux';\nimport { userActions } from '../store/actions';\nimport {Link} from \"react-router-dom\";\nimport {withRouter} from 'react-router-dom';\n\nconst { Header} = Layout;\nconst { SubMenu } = Menu;\nconst { Search } = Input;\n\nclass HeaderComponent extends React.PureComponent {\n\n  logout = () => {\n    this.props.dispatch(userActions.logout())\n  }\n\n  search = (e) => {\n    this.props.search({key:e.target.value})\n  }\n\n  render() {\n    let email = this.props.auth.email || \"test@test.com\";\n    function get_gravatar(size) {\n      var MD5=function(s){function L(k,d){return(k<<d)|(k>>>(32-d))}function K(G,k){var I,d,F,H,x;F=(G&2147483648);H=(k&2147483648);I=(G&1073741824);d=(k&1073741824);x=(G&1073741823)+(k&1073741823);if(I&d){return(x^2147483648^F^H)}if(I|d){if(x&1073741824){return(x^3221225472^F^H)}else{return(x^1073741824^F^H)}}else{return(x^F^H)}}function r(d,F,k){return(d&F)|((~d)&k)}function q(d,F,k){return(d&k)|(F&(~k))}function p(d,F,k){return(d^F^k)}function n(d,F,k){return(F^(d|(~k)))}function u(G,F,aa,Z,k,H,I){G=K(G,K(K(r(F,aa,Z),k),I));return K(L(G,H),F)}function f(G,F,aa,Z,k,H,I){G=K(G,K(K(q(F,aa,Z),k),I));return K(L(G,H),F)}function D(G,F,aa,Z,k,H,I){G=K(G,K(K(p(F,aa,Z),k),I));return K(L(G,H),F)}function t(G,F,aa,Z,k,H,I){G=K(G,K(K(n(F,aa,Z),k),I));return K(L(G,H),F)}function e(G){var Z;var F=G.length;var x=F+8;var k=(x-(x%64))/64;var I=(k+1)*16;var aa=Array(I-1);var d=0;var H=0;while(H<F){Z=(H-(H%4))/4;d=(H%4)*8;aa[Z]=(aa[Z]|(G.charCodeAt(H)<<d));H++}Z=(H-(H%4))/4;d=(H%4)*8;aa[Z]=aa[Z]|(128<<d);aa[I-2]=F<<3;aa[I-1]=F>>>29;return aa}function B(x){var k=\"\",F=\"\",G,d;for(d=0;d<=3;d++){G=(x>>>(d*8))&255;F=\"0\"+G.toString(16);k=k+F.substr(F.length-2,2)}return k}function J(k){k=k.replace(/rn/g,\"n\");var d=\"\";for(var F=0;F<k.length;F++){var x=k.charCodeAt(F);if(x<128){d+=String.fromCharCode(x)}else{if((x>127)&&(x<2048)){d+=String.fromCharCode((x>>6)|192);d+=String.fromCharCode((x&63)|128)}else{d+=String.fromCharCode((x>>12)|224);d+=String.fromCharCode(((x>>6)&63)|128);d+=String.fromCharCode((x&63)|128)}}}return d}var C=[];var P,h,E,v,g,Y,X,W,V;var S=7,Q=12,N=17,M=22;var A=5,z=9,y=14,w=20;var o=4,m=11,l=16,j=23;var U=6,T=10,R=15,O=21;s=J(s);C=e(s);Y=1732584193;X=4023233417;W=2562383102;V=271733878;for(P=0;P<C.length;P+=16){h=Y;E=X;v=W;g=V;Y=u(Y,X,W,V,C[P+0],S,3614090360);V=u(V,Y,X,W,C[P+1],Q,3905402710);W=u(W,V,Y,X,C[P+2],N,606105819);X=u(X,W,V,Y,C[P+3],M,3250441966);Y=u(Y,X,W,V,C[P+4],S,4118548399);V=u(V,Y,X,W,C[P+5],Q,1200080426);W=u(W,V,Y,X,C[P+6],N,2821735955);X=u(X,W,V,Y,C[P+7],M,4249261313);Y=u(Y,X,W,V,C[P+8],S,1770035416);V=u(V,Y,X,W,C[P+9],Q,2336552879);W=u(W,V,Y,X,C[P+10],N,4294925233);X=u(X,W,V,Y,C[P+11],M,2304563134);Y=u(Y,X,W,V,C[P+12],S,1804603682);V=u(V,Y,X,W,C[P+13],Q,4254626195);W=u(W,V,Y,X,C[P+14],N,2792965006);X=u(X,W,V,Y,C[P+15],M,1236535329);Y=f(Y,X,W,V,C[P+1],A,4129170786);V=f(V,Y,X,W,C[P+6],z,3225465664);W=f(W,V,Y,X,C[P+11],y,643717713);X=f(X,W,V,Y,C[P+0],w,3921069994);Y=f(Y,X,W,V,C[P+5],A,3593408605);V=f(V,Y,X,W,C[P+10],z,38016083);W=f(W,V,Y,X,C[P+15],y,3634488961);X=f(X,W,V,Y,C[P+4],w,3889429448);Y=f(Y,X,W,V,C[P+9],A,568446438);V=f(V,Y,X,W,C[P+14],z,3275163606);W=f(W,V,Y,X,C[P+3],y,4107603335);X=f(X,W,V,Y,C[P+8],w,1163531501);Y=f(Y,X,W,V,C[P+13],A,2850285829);V=f(V,Y,X,W,C[P+2],z,4243563512);W=f(W,V,Y,X,C[P+7],y,1735328473);X=f(X,W,V,Y,C[P+12],w,2368359562);Y=D(Y,X,W,V,C[P+5],o,4294588738);V=D(V,Y,X,W,C[P+8],m,2272392833);W=D(W,V,Y,X,C[P+11],l,1839030562);X=D(X,W,V,Y,C[P+14],j,4259657740);Y=D(Y,X,W,V,C[P+1],o,2763975236);V=D(V,Y,X,W,C[P+4],m,1272893353);W=D(W,V,Y,X,C[P+7],l,4139469664);X=D(X,W,V,Y,C[P+10],j,3200236656);Y=D(Y,X,W,V,C[P+13],o,681279174);V=D(V,Y,X,W,C[P+0],m,3936430074);W=D(W,V,Y,X,C[P+3],l,3572445317);X=D(X,W,V,Y,C[P+6],j,76029189);Y=D(Y,X,W,V,C[P+9],o,3654602809);V=D(V,Y,X,W,C[P+12],m,3873151461);W=D(W,V,Y,X,C[P+15],l,530742520);X=D(X,W,V,Y,C[P+2],j,3299628645);Y=t(Y,X,W,V,C[P+0],U,4096336452);V=t(V,Y,X,W,C[P+7],T,1126891415);W=t(W,V,Y,X,C[P+14],R,2878612391);X=t(X,W,V,Y,C[P+5],O,4237533241);Y=t(Y,X,W,V,C[P+12],U,1700485571);V=t(V,Y,X,W,C[P+3],T,2399980690);W=t(W,V,Y,X,C[P+10],R,4293915773);X=t(X,W,V,Y,C[P+1],O,2240044497);Y=t(Y,X,W,V,C[P+8],U,1873313359);V=t(V,Y,X,W,C[P+15],T,4264355552);W=t(W,V,Y,X,C[P+6],R,2734768916);X=t(X,W,V,Y,C[P+13],O,1309151649);Y=t(Y,X,W,V,C[P+4],U,4149444226);V=t(V,Y,X,W,C[P+11],T,3174756917);W=t(W,V,Y,X,C[P+2],R,718787259);X=t(X,W,V,Y,C[P+9],O,3951481745);Y=K(Y,h);X=K(X,E);W=K(W,v);V=K(V,g)}var i=B(Y)+B(X)+B(W)+B(V);return i.toLowerCase()};\n      size = size || 80;\n      return 'https://www.gravatar.com/avatar/' + MD5(email) + '.jpg?s=' + size;\n  }\n\n    console.log(this.props.location)\n    return (\n      <Header className=\"header\" style={{ padding: 0 }}>\n  <Link to=\"/\"><div className=\"brand\">GoGallery</div></Link>\n      {this.props.location.pathname === \"/\" && <Search placeholder=\"Filter Photos\" onChange={this.search} style={{ width: \"400px\" }}/>}\n      <Menu theme=\"dark\" mode=\"horizontal\" selectable={true} style={{ marginTop: 8, float: \"right\" }}>\n        <SubMenu title={<Avatar shape=\"square\" src={get_gravatar(50)} style={{ marginTop: 0 }} />} style={{ padding: \"0px 0px\" }}>\n          <Menu.Item key=\"setting:1\" onClick={this.logout}><Icon type=\"logout\" />Logout</Menu.Item>\n          <Menu.Item key=\"setting:3\"><Link to=\"/settings\"><Icon type=\"setting\" />Settings</Link></Menu.Item>\n        </SubMenu>\n      </Menu>\n    </Header>\n    );\n  }\n}\n\nconst mapStateToProps = (state) =>{\n  const auth = state.UserReducer;\n  return {\n    auth,\n  };\n}\n\nexport default withRouter(connect(mapStateToProps)(HeaderComponent))\n\n","import React from 'react';\nimport { Modal,  Input , Form, TreeSelect} from 'antd';\n\nimport { formatTree} from \"../store\";\nimport { connect } from 'react-redux';\n\nimport {galleryActions, collectionActions} from '../store/actions'\n\nconst CollectionCreateForm = Form.create({ name: 'form_in_modal' })(\n  // eslint-disable-next-line\n  class extends React.Component {\n    render() {\n      const { visible, onCancel, onCreate, form } = this.props;\n      const { getFieldDecorator } = form;\n\n\n      formatTree(this.props.collections)\n      const collections = Object.values(this.props.collections)\n\n      return (\n        <Modal\n          visible={visible}\n          title=\"Create a new collection\"\n          okText=\"Create\"\n          onCancel={onCancel}\n          onOk={onCreate}\n        >\n          <Form layout=\"vertical\">\n            <Form.Item label=\"Choose collection\" hasFeedback>\n                {getFieldDecorator('id', {\n                  rules: [{ required: true, message: 'Please select the collection to upload photos to!' }],\n                })(\n                  <TreeSelect\n                      treeData={collections}\n                      placeholder=\"Select Collection\"\n                      onChange={this.enableUpload}\n                    />\n                )}\n            </Form.Item>\n            <Form.Item label=\"Collection Name\">\n              {getFieldDecorator('name', {\n                rules: [{ required: true, message: 'Please input the name of collection!' }],\n              })(<Input />)}\n            </Form.Item>\n          </Form>\n        </Modal>\n      );\n    }\n  },\n);\n\nclass AddCollection extends React.Component {\n  handleCancel = () => {\n    this.props.dispatch(galleryActions.hideAdd())\n  };\n\n  handleCreate = () => {\n    const { form } = this.formRef.props;\n    form.validateFields((err, values) => {\n      if (err) {\n        return;\n      }\n\n      console.log('Received values of form: ', values);\n      form.resetFields();\n\n      this.props.dispatch(collectionActions.create(values))\n      this.props.dispatch(galleryActions.hideAdd())\n    });\n  };\n\n  saveFormRef = formRef => {\n    this.formRef = formRef;\n  };\n\n  render() {\n    return (\n        <CollectionCreateForm\n          wrappedComponentRef={this.saveFormRef}\n          visible={this.props.addCollectionModalVisable}\n          onCancel={this.handleCancel}\n          onCreate={this.handleCreate}\n          collections ={this.props.collections}\n        />\n    );\n  }\n}\nconst mapToProps = (state) =>{\n  const addCollectionModalVisable = state.GalleryReducer.addCollectionModalVisable;\n  const collections = state.CollectionsReducer.collections\n  return {addCollectionModalVisable, collections};\n}\nexport default connect(mapToProps)(AddCollection)\n","import React from 'react';\nimport { Modal, Icon, Form, TreeSelect } from 'antd';\nimport {config, formatTree} from \"../store\";\nimport { Upload } from 'antd';\nimport axios from \"axios\"\n\nimport { connect } from 'react-redux';\nimport {galleryActions, collectionActions, getOptions} from '../store/actions'\n\nconst CollectionCreateForm = Form.create({ name: 'form_in_modal' })(\n  // eslint-disable-next-line\n  class extends React.Component {\n    constructor(){\n      super()\n      this.state = {\n        enableUpload: false,\n        collection: \"\"\n      }\n    }\n    normFile = e => {\n      console.log('Upload event:', e);\n      if (Array.isArray(e)) {\n        return e;\n      }\n      return e && e.fileList;\n    };\n\n    enableUpload = (collection) =>{\n      this.setState({enableUpload: true, collection: collection})\n    }\n\n    customRequest = (options ) => {\n\t\t\tconst data= new FormData()\n      data.append('file', options.file)\n      let config = getOptions();\n      config.headers[\"content-type\"] = 'multipart/form-data; boundary=----WebKitFormBoundaryqTqJIxvkWFYqvP5s';\n\t\t\t\n\t\t\taxios.post(options.action, data, config).then((res) => {\n\t\t\t\toptions.onSuccess(res.data, options.file)\n\t\t\t}).catch((err) => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t\t\n    }\n    \n    \n    render() {\n      const { visible, onCancel, onCreate, form } = this.props;\n      const { getFieldDecorator } = form;\n\n      formatTree(this.props.collections)\n      const collections = Object.values(this.props.collections)\n      return (\n        <Modal\n          visible={visible}\n          title=\"Upload New Photos\"\n          okText=\"Upload\"\n          onCancel={onCancel}\n          onOk={onCreate}\n        >\n          <Form layout=\"vertical\">\n            <Form.Item label=\"Choose collection\" hasFeedback>\n              {getFieldDecorator('select', {\n                rules: [{ required: true, message: 'Please select the collection to upload photos to!' }],\n              })(\n                <TreeSelect\n                    treeData={collections}\n                    placeholder=\"Select Collection\"\n                    onChange={this.enableUpload}\n                  />\n              )}\n          </Form.Item>\n            <Form.Item>\n          {getFieldDecorator('photos', {\n            valuePropName: 'fileList',\n            getValueFromEvent: this.normFile,\n          })(\n            <Upload.Dragger name=\"files\" customRequest={this.customRequest} action={config.baseUrl+\"/collection/uploadFile\"}  multiple={true}  listType={'picture'} disabled={!this.state.enableUpload}>\n              <p className=\"ant-upload-drag-icon\">\n                <Icon type=\"inbox\" />\n              </p>\n          <p className=\"ant-upload-text\">Click or drag file to this area to upload </p>\n              <p className=\"ant-upload-hint\">Support for a single or bulk upload.</p>\n            </Upload.Dragger>,\n          )}\n        </Form.Item>\n\n          </Form>\n        </Modal>\n      );\n    }\n  },\n);\n\nclass UploadCollection extends React.Component {\n  handleCancel = () => {\n    this.props.dispatch(galleryActions.hideUpload())\n  };\n\n  handleCreate = () => {\n    const { form } = this.formRef.props;\n    form.validateFields((err, values) => {\n      if (err) {\n        return;\n      }\n      console.log('Received values of form: ', values);\n      form.resetFields();\n\n      this.props.dispatch(collectionActions.upload({\n        album: values.select,\n        photos: values.photos.map(a => a.name)\n      }))\n      this.props.dispatch(galleryActions.hideUpload())\n    });\n  };\n\n  saveFormRef = formRef => {\n    this.formRef = formRef;\n  };\n\n  render() {\n    return (\n        <CollectionCreateForm\n          wrappedComponentRef={this.saveFormRef}\n          visible={this.props.uploadModalVisable}\n          onCancel={this.handleCancel}\n          onCreate={this.handleCreate}\n          collections ={this.props.collections}\n        />\n    );\n  }\n}\n\n\nconst mapToProps = (state) =>{\n  const uploadModalVisable = state.GalleryReducer.uploadModalVisable;\n  const collections = state.CollectionsReducer.collections\n  return {uploadModalVisable, collections};\n}\nexport default connect(mapToProps)(UploadCollection)\n\n","import React, { useState, useEffect } from \"react\"\nimport styled from \"styled-components\"\n\nconst placeHolder =\n  \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkqAcAAIUAgUW0RjgAAAAASUVORK5CYII=\"\n\nconst Image = styled.img`\n  display: block;\n  height: 100%;\n  width: 100%;\n  object-fit: cover;\n  // Add a smooth animation on loading\n  @keyframes loaded {\n    0% {\n      opacity: 0.1;\n    }\n    100% {\n      opacity: 1;\n    }\n  }\n  // I use utilitary classes instead of props to avoid style regenerating\n  &.loaded:not(.has-error) {\n    animation: loaded 300ms ease-in-out;\n  }\n  &.has-error {\n    // fallback to placeholder image on error\n    content: url(${placeHolder});\n  }\n`\n\nexport const LazyImage = ({ src, alt }) => {\n  const [imageSrc, setImageSrc] = useState(placeHolder)\n  const [imageRef, setImageRef] = useState()\n\n  const onLoad = event => {\n    event.target.classList.add(\"loaded\")\n  }\n\n  const onError = event => {\n    event.target.classList.add(\"has-error\")\n  }\n\n  useEffect(() => {\n    let observer\n    let didCancel = false\n\n    if (imageRef && imageSrc !== src) {\n      if (IntersectionObserver) {\n        observer = new IntersectionObserver(\n          entries => {\n            entries.forEach(entry => {\n              if (\n                !didCancel &&\n                (entry.intersectionRatio > 0 || entry.isIntersecting)\n              ) {\n                setImageSrc(src)\n                observer.unobserve(imageRef)\n              }\n            })\n          },\n          {\n            threshold: 0.01,\n            rootMargin: \"75%\",\n          }\n        )\n        observer.observe(imageRef)\n      } else {\n        // Old browsers fallback\n        setImageSrc(src)\n      }\n    }\n    return () => {\n      didCancel = true\n      // on component cleanup, we remove the listner\n      if (observer && observer.unobserve) {\n        observer.unobserve(imageRef)\n      }\n    }\n  }, [src, imageSrc, imageRef])\n  return (\n    <Image\n      ref={setImageRef}\n      src={imageSrc}\n      alt={alt}\n      onLoad={onLoad}\n      onError={onError}\n    />\n  )\n}","import React from 'react';\nimport Selection from 'react-ds';\nimport './Main.css';\nimport { Layout, Menu, Icon, Radio, Row, Col, Tree}  from 'antd';\nimport moment from 'moment';\nimport { connect } from 'react-redux';\nimport { collectionActions, photoActions } from '../store/actions';\n\n/*****************************/\n//import actions from \"../store/actions\";\nimport SideBar from '../components/sidebar'\nimport MoveModal from '../components/modal'\nimport Header from '../components/header'\nimport AddCollection from '../components/addCollection'\nimport UploadPhotos from '../components/upload'\nimport { galleryActions } from '../store/actions/gallery';\nimport { config, formatTree, IDFromTree } from '../store';\nimport { LazyImage } from '../components/Lazyloading';\n\nconst { Content, Sider, Footer } = Layout;\nconst { SubMenu } = Menu;\nconst { DirectoryTree } = Tree;\nclass Main extends React.PureComponent {\n\n  constructor() {\n    super();\n\n    this.state = {\n      ref: null,\n      elRefs: [],\n      selectedElements: [], // track the elements that are selected\n      collapsed: true,\n      selectedPhoto: {},\n      filter: \"\",\n      uploaded_filter: \"\"\n    };\n  }\n\n  _handleKeyDown = (event) => {\n    switch (event.keyCode) {\n      case 27:\n        this.setState({\n          selectedPhoto: {},\n          selectedElements: []\n        })\n        break;\n      default:\n        break;\n    }\n  }\n\n  componentDidMount() {\n    this.props.dispatch(photoActions.getAll());\n    this.props.dispatch(collectionActions.getAll());\n    // this.props.getAllPhotos();\n    // this.props.getCollections();\n\n    document.addEventListener(\"keydown\", this._handleKeyDown);\n  }\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\n  }\n\n  selectPhoto = (e, photo) => {\n    e.stopPropagation();\n    this.setState({\n      selectedPhoto: this.props.photos.findIndex(x => x.id === photo.id),\n      selectedElements: [this.props.photos.findIndex(x => x.id === photo.id)]\n    })\n  }\n\n  clearSelection = () => {\n    console.log(\"Clear Selected\")\n    this.setState({ selectedPhoto: {} });\n  }\n\n  onCollapse = collapsed => {\n    console.log(collapsed);\n    this.setState({ collapsed });\n  };\n\n  handleSelection = (indexes) => {\n    this.setState({\n      selectedElements: indexes,\n    });\n  };\n\n  getStyle = (index) => {\n    let selectedElements = this.state.selectedElements.map(s => this.props.photos[s]);\n    if (selectedElements.find(e => e.id === index) !== undefined) {\n      // Selected state\n      return {\n        border: '3px solid #2185d0',\n        margin: 0,\n        textAlign: \"center\"\n      };\n    }\n    return {\n      textAlign: \"center\"\n    };\n  };\n\n  handleSizeChange = (e) => {\n    this.props.dispatch(galleryActions.changeImageSize(e.target.value))\n  }\n\n  addElementRef = (ref) => {\n    const elRefs = this.state.elRefs;\n    elRefs.push(ref);\n    this.setState({\n      elRefs,\n    });\n  };\n\n  renderSelection() {\n    if (!this.state.ref || !this.state.elRefs) {\n      return null;\n    }\n    return (\n      <Selection\n        target={this.state.ref}\n        elements={this.state.elRefs}\n        onSelectionChange={this.handleSelection}\n        style={this.props.style}\n      />\n    );\n  }\n\n  search = (event) => {\n    this.setState({ filter: event.target.value })\n  }\n\n  onTreeSelect = (selectedKeys, info) => {\n    console.log('selected', info); //.node.props.id);\n  };\n\n  filterPhotos = (item) => {\n    switch (item.key) {\n      case \"all\":\n        this.setState({ filter: \"\", uploaded_filter: \"\" })\n        break;\n      case \"add\":\n        this.setState({ filter: \"\", uploaded_filter: \"\" })\n        break;\n      case \"upload\":\n        this.setState({ filter: \"\", uploaded_filter: \"\" })\n        break;\n      case \"uploaded\":\n        this.setState({ filter: \"\", uploaded_filter: this.props.uploadDates.sort().reverse()[0] })\n        break;\n      default:\n        if (item.key !== undefined){\n          this.setState({ filter: item.key, uploaded_filter: \"\" })\n        }else{\n          let name = IDFromTree(this.props.collections, item[\"0\"])\n          this.setState({ filter: name.id, uploaded_filter: \"\" })\n          \n        }\n        break;\n    }\n  }\n\n  render() {\n    const selectedElements = this.state.selectedElements.map(s => this.props.photos[s]);\n    const lowercasedFilter = this.state.filter.toLowerCase();\n\n    formatTree(this.props.collections)\n    const collections = Object.values(this.props.collections)\n\n\n    const filteredData = this.props.photos.filter(item => {\n      return search(item, this.state.uploaded_filter, lowercasedFilter)\n    });\n\n    function formatDate(date) {\n      let formattedDate = moment(date, \"YYYY-MM-DD\").format(\"DD-MM-YYYY\");\n      return formattedDate;\n    }\n\n    function search(item, uploaded_filter, lowercasedFilter) {\n      if (uploaded_filter !== \"\") {\n        return moment(item.meta[\"DateAdded\"], \"YYYY-MM-DD'T'HH:mm:SSZ\").format(\"YYYY-MM-DD HH:mm\") === uploaded_filter\n      } else {\n        if (item[\"name\"].toLowerCase().includes(lowercasedFilter)) { return true }\n        if (item[\"album\"].toLowerCase() === (lowercasedFilter)) { return true }\n        if (item.exif[\"DateTaken\"].toLowerCase().includes(lowercasedFilter)) { return true }\n      }\n      return false\n    }\n\n    let selectMessage = filteredData.length + \" photos\"\n    if (this.state.selectedElements.length > 0) {\n      selectMessage = this.state.selectedElements.length + \" out of \" + filteredData.length + \" selected\"\n    }\n\n    return (\n      <Layout style={{ minHeight: '100vh' }}>\n        <Header search={this.filterPhotos}/>\n        <Layout>\n          <Sider collapsible collapsed={this.state.collapsed} onCollapse={this.onCollapse} style={{ overflowY: \"auto\" }}>\n            <Menu theme=\"dark\" mode=\"inline\" selectable={true} defaultSelectedKeys={[\"all\"]} onSelect={this.filterPhotos}>\n              <Menu.Item key=\"all\">\n                <Icon type=\"picture\" />\n                <span>All Content</span>\n              </Menu.Item>\n              <Menu.Item key=\"uploaded\">\n                <Icon type=\"clock-circle\" />\n                <span>Last Uploaded</span>\n              </Menu.Item>\n              <SubMenu\n                key=\"calendar\"\n                title={\n                  <span>\n                    <Icon type=\"calendar\" />\n                    <span>Date Captured</span>\n                  </span>\n                }\n              >\n                {this.props.dates.map((el, index) => (<Menu.Item key={el}>{formatDate(el)}</Menu.Item>))}\n              </SubMenu>\n              <SubMenu\n                key=\"collections\"\n                title={\n                  <span>\n                    <Icon type=\"camera\" />\n                    <span>Collections</span>\n                  </span>\n                }\n              >\n                <DirectoryTree\n                className=\"draggable-tree\"\n                defaultExpandedKeys={this.state.expandedKeys}\n                draggable\n                blockNode\n                onSelect={this.onTreeSelect()}\n                treeData={collections}\n              />\n              </SubMenu>\n            </Menu>\n            <AddCollection />\n            <UploadPhotos /> \n            <Menu theme=\"dark\" mode=\"inline\" selectable={false}>\n              <Menu.Item onClick={() => this.props.dispatch(galleryActions.showAdd())} key=\"add\" style={{ backgroundColor: \"@popover-background\", position: \"absolute\", bottom: 50 }}><Icon type=\"plus\" /> <span>Add Collection</span></Menu.Item>\n              <Menu.Item onClick={() => this.props.dispatch(galleryActions.showUpload())} key=\"upload\" style={{ backgroundColor: \"@popover-background\", position: \"absolute\", bottom: 100 }}><Icon type=\"upload\" /> <span>Upload</span></Menu.Item>\n            </Menu>\n          </Sider>\n          <Layout>\n            <div ref={(ref) => { this.setState({ ref }); }} className='item-container' onClick={this.clearSelection}>\n              <Content\n                style={{\n                  padding: 28,\n                  margin: 0,\n                  height: \"calc( 100vh - 106px)\",\n                  overflow: \"auto\"\n                }}\n              >\n                <Row gutter={[16, 16]}>\n                  {filteredData.map((el, index) => (\n                    <Col key={el.id} span={parseInt(this.props.imageSize)} style={{ padding: 2 }}>\n                      <div\n                        ref={this.addElementRef}\n                        className={`item`}\n                      >\n                        <figure className=\"galleryImg\" style={this.getStyle(el.id)} onClick={(e) => this.selectPhoto(e, el)}>\n                          <LazyImage src={config.imageUrl + el.id+\"?size=tiny&token=\"+localStorage.getItem('token')} width=\"100%\" height=\"100%\" alt=\"thumbnail\" />\n                        </figure>\n                      </div>\n                    </Col>\n                  ))}\n                  {this.renderSelection()}\n                </Row>\n              </Content>\n            </div>\n            <Footer style={{ backgroundColor: \"#141414\", height: 42, border: \"1px solid black\", padding: 4, zIndex: 2, borderBottom: \"0px\", textAlign: \"center\" }}>\n              {this.state.selectedElements.length > 0 && <MoveModal selectedPhotos={selectedElements} />}\n              <span style={{ lineHeight: \"32px\" }}> {selectMessage}</span>\n              <Radio.Group onChange={this.handleSizeChange} style={{ float: \"right\" }} defaultValue={this.props.imageSize}>\n                <Radio.Button value=\"1\">tiny</Radio.Button>\n                <Radio.Button value=\"4\">Small</Radio.Button>\n                <Radio.Button value=\"6\">Medium</Radio.Button>\n                <Radio.Button value=\"8\">Large</Radio.Button>\n              </Radio.Group>\n            </Footer>\n          </Layout>\n          <SideBar data={this.props.photos[this.state.selectedPhoto]} /> \n        </Layout>\n      </Layout>\n    );\n  }\n}\n\n\n\nconst mapToProps = (state) =>{\n  const photos = state.PhotoReducer.photos;\n  const dates = state.CollectionsReducer.dates\n  const uploadDates = state.CollectionsReducer.uploadDates\n  const collections = state.CollectionsReducer.collections\n  const imageSize = state.GalleryReducer.imageSize\n  return {\n    photos,\n    dates,\n    collections,\n    uploadDates,\n    imageSize\n\n  };\n}\n\nexport default connect(mapToProps)(Main);","import React from 'react';\nimport './Login.css'\nimport { Form, Icon, Input, Button, Alert } from 'antd';\nimport {  Card } from 'antd';\nimport { Row, Col } from 'antd';\n\nimport {\n  withRouter\n} from 'react-router-dom'\n\nimport { connect } from 'react-redux';\nimport { userActions } from '../store/actions';\n\nconst CollectionCreateForm = Form.create({ name: 'form_in_modal' })(\nclass extends React.Component {\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        console.log('Received values of form: ', values);\n        if (values.username && values.password) {\n          console.log('sending: ', values);\n          this.props.onDone(values)\n        }\n      }\n    });\n  };\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    return (\n      <Form onSubmit={this.handleSubmit} className=\"login-form\">\n        <Form.Item>\n          {getFieldDecorator('username', {\n            rules: [{ required: true, message: 'Please input your username!' }],\n          })(\n            <Input\n              prefix={<Icon type=\"user\" style={{ color: 'rgba(255,255,255,.25)' }} />}\n              placeholder=\"Username\"\n            />,\n          )}\n        </Form.Item>\n        <Form.Item>\n          {getFieldDecorator('password', {\n            rules: [{ required: true, message: 'Please input your Password!' }],\n          })(\n            <Input\n              prefix={<Icon type=\"lock\" style={{ color: 'rgba(255,255,255,.25)' }} />}\n              type=\"password\"\n              placeholder=\"Password\"\n            />,\n          )}\n        </Form.Item>\n        {this.props.loginFailed && (\n         <div><br/>\n         <Alert message=\"Login Error: Invalid username/password\" type=\"error\" showIcon closable style={{\"backgroundColor\":\"#141414\", textAlign:\"left\"}} />\n         <br/>\n         </div>\n      )}\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\n            Log in\n          </Button>\n        </Form.Item>\n      </Form>\n    );\n  }\n}\n);\n\nclass Login extends React.Component {\n  state = {\n    redirectToReferrer: false\n  }\n\n  changeRoute = (values) => {\n    console.log(\"Stopping Reater\")\n    this.props.dispatch(userActions.login(values.username, values.password));\n  }\n\n  render() {\n    return (\n        <Row type=\"flex\" justify=\"center\" align=\"middle\" style={{minHeight: '100vh'}}>\n            <Col>\n            <Card  title={\"GoGallery Dashbard\"} style={{textAlign: \"center\"}}> \n        <CollectionCreateForm\n          login ={this.props.login}\n          loginFailed = {this.props.loginFailed}\n          onDone = {this.changeRoute}\n        />\n        </Card>\n        </Col>\n        </Row>\n    );\n  }\n}\n\nconst mapStateToProps = (state) =>{\n  console.log(state)\n  const { loggingIn,  loginFailed} = state.UserReducer;\n  return {\n      loggingIn,\n      loginFailed\n  };\n}\n\nexport default withRouter(connect(mapStateToProps)(Login));\n","import React from 'react';\nimport {\n    Form,\n    Input,\n    Divider,\n    Button,\n  } from 'antd';\n  import { connect } from 'react-redux';\n  import { userActions } from '../../store/actions';\n\n  class RegistrationForm extends React.Component {\n    state = {\n      confirmDirty: false,\n      autoCompleteResult: [],\n      auth: {username:\"\"}\n    };\n\n    // componentDidUpdate(prevProps, prevState) {\n    //   if (prevState.auth.username !== this.state.auth.username) {\n    //     let auth = prevState.auth\n    //     auth.username = nextProps.auth.username\n    //     this.setState({auth});\n        \n    //   }\n    // }\n\n    // static getDerivedStateFromProps(nextProps, prevState){\n    //   const { auth } = nextProps\n    //   console.log(\"REGISTRATION\", auth.username ,  prevState.auth.username)\n    //   if (auth.username !== prevState.auth.username ){\n    //     return { auth }\n    //   }\n    //   return null\n    // }\n\n\n\n  \n    handleSubmit = e => {\n      e.preventDefault();\n      this.props.form.validateFieldsAndScroll((err, values) => {\n        if (!err) {\n          console.log('Received values of form: ', values);\n          if(values.password !== undefined){\n            this.props.dispatch(userActions.update({\n              username: values.username,\n              email: values.email,\n              password: values.password\n            }))\n          }else{\n            this.props.dispatch(userActions.update({\n              username: values.username,\n              email: values.email\n            }))\n          }\n        }\n      });\n    };\n  \n    handleConfirmBlur = e => {\n      const { value } = e.target;\n      this.setState({ confirmDirty: this.state.confirmDirty || !!value });\n    };\n  \n    compareToFirstPassword = (rule, value, callback) => {\n      const { form } = this.props;\n      \n      //if (value && this.state.confirmDirty) {\n        form.validateFields(['password'], { force: true });\n      \n      if (value && value !== form.getFieldValue('password')) {\n        callback('Two passwords that you enter is inconsistent!');\n      } else {\n        callback();\n      }\n    };\n  \n    validateToNextPassword = (rule, value, callback) => {\n      const { form } = this.props;\n      if (value && this.state.confirmDirty) {\n        form.validateFields(['confirm'], { force: true });\n      }\n      if (value && value !== form.getFieldValue('confirm')) {\n        callback('Two passwords that you enter is inconsistent!');\n      } else {\n        callback();\n      }\n    };\n  \n    handleWebsiteChange = value => {\n      let autoCompleteResult;\n      if (!value) {\n        autoCompleteResult = [];\n      } else {\n        autoCompleteResult = ['.com', '.org', '.net'].map(domain => `${value}${domain}`);\n      }\n      this.setState({ autoCompleteResult });\n    };\n  \n    render() {\n      const { getFieldDecorator } = this.props.form;\n  \n    \n\n      const formItemLayout = {\n        labelCol: {\n          xs: { span: 24 },\n          sm: { span: 5 },\n        },\n        wrapperCol: {\n          xs: { span: 24 },\n          sm: { span: 19 },\n        },\n      };\n      const tailFormItemLayout = {\n        wrapperCol: {\n          xs: {\n            span: 24,\n            offset: 0,\n          },\n          sm: {\n            span: 8,\n            offset: 8,\n          },\n        },\n      };\n      \n      console.log(\"REGISTRATION STATWE\",this.props)\n      return (\n        <div>\n        <Form {...formItemLayout} onSubmit={this.handleSubmit}>\n        < Divider>{this.state.auth.username}</Divider>\n          <Form.Item label=\"Username\">\n            {getFieldDecorator('username', {\n              rules: [\n                {\n                  required: true,\n                  message: 'Please input your username',\n                },\n              ],\n            })(<Input/>)}\n          </Form.Item>\n          <Form.Item label=\"E-mail\">\n            {getFieldDecorator('email', {\n              rules: [\n                {\n                  type: 'email',\n                  message: 'The input is not valid E-mail!',\n                },\n                {\n                  required: true,\n                  message: 'Please input your E-mail!',\n                },\n              ],\n            })(<Input />)}\n          </Form.Item>\n          <Form.Item label=\"Password\" hasFeedback>\n            {getFieldDecorator('password', {\n              rules: [\n                {\n                  required: false,\n                  message: 'Please input your password!',\n                },\n                {\n                  validator: this.validateToNextPassword,\n                },\n              ],\n            })(<Input.Password />)}\n          </Form.Item>\n          <Form.Item label=\"Confirm Password\" hasFeedback>\n            {getFieldDecorator('confirm', {\n              rules: [\n                {\n                  required: false,\n                  message: 'Please confirm your password!',\n                },\n                {\n                  validator: this.compareToFirstPassword,\n                },\n              ],\n            })(<Input.Password onBlur={this.handleConfirmBlur} />)}\n          </Form.Item>\n          <Divider/>\n          <Form.Item {...tailFormItemLayout}>\n            <Button type=\"primary\" htmlType=\"submit\" style={{width:\"100%\"}}>\n              Save\n            </Button>\n          </Form.Item>\n          </Form>\n        </div>\n\n      );\n    }\n  }\nconst mapToProps = (state) =>{\n  console.log(\"REG\",state.UserReducer);\n  const auth = state.UserReducer;\n  const photos = state.PhotoReducer.photos;\n  return {\n    auth,\n    photos\n  };\n}\n\nexport default connect(mapToProps)(Form.create({ name: 'register', mapPropsToFields(props) {\n  return {\n    username: Form.createFormField({...props.username, value: props.auth.username}),\n    email: Form.createFormField({...props.email, value: props.auth.email}),\n  };\n}})(RegistrationForm));\n","import React from 'react';\nimport {\n    Form,\n    Input,\n    Divider,\n    Button,\n  } from 'antd';\n  import { connect } from 'react-redux';\nimport { settingsActions } from '../../store/actions';\n \n\n  class ProfileForm extends React.Component {\n    state = {\n      confirmDirty: false,\n      autoCompleteResult: [],\n      auth: {username:\"\"}\n    };\n\n    // componentDidUpdate(prevProps, prevState) {\n    //   if (prevState.auth.username !== this.state.auth.username) {\n    //     let auth = prevState.auth\n    //     auth.username = nextProps.auth.username\n    //     this.setState({auth});\n        \n    //   }\n    // }\n\n    // static getDerivedStateFromProps(nextProps, prevState){\n    //   const { auth } = nextProps\n    //   console.log(\"REGISTRATION\", auth.username ,  prevState.auth.username)\n    //   if (auth.username !== prevState.auth.username ){\n    //     return { auth }\n    //   }\n    //   return null\n    // }\n\n\n\n  \n    handleSubmit = e => {\n      e.preventDefault();\n      this.props.form.validateFieldsAndScroll((err, values) => {\n        if (!err) {\n          console.log('Received values of form: ', values);\n          this.props.dispatch(settingsActions.setProfile(values))\n        }\n      });\n    };\n  \n    handleConfirmBlur = e => {\n      const { value } = e.target;\n      this.setState({ confirmDirty: this.state.confirmDirty || !!value });\n    };\n  \n    compareToFirstPassword = (rule, value, callback) => {\n      const { form } = this.props;\n      \n      //if (value && this.state.confirmDirty) {\n        form.validateFields(['password'], { force: true });\n      \n      if (value && value !== form.getFieldValue('password')) {\n        callback('Two passwords that you enter is inconsistent!');\n      } else {\n        callback();\n      }\n    };\n  \n    validateToNextPassword = (rule, value, callback) => {\n      const { form } = this.props;\n      if (value && this.state.confirmDirty) {\n        form.validateFields(['confirm'], { force: true });\n      }\n      if (value && value !== form.getFieldValue('confirm')) {\n        callback('Two passwords that you enter is inconsistent!');\n      } else {\n        callback();\n      }\n    };\n  \n    handleWebsiteChange = value => {\n      let autoCompleteResult;\n      if (!value) {\n        autoCompleteResult = [];\n      } else {\n        autoCompleteResult = ['.com', '.org', '.net'].map(domain => `${value}${domain}`);\n      }\n      this.setState({ autoCompleteResult });\n    };\n  \n    render() {\n      const { getFieldDecorator } = this.props.form;\n  \n    \n\n      const formItemLayout = {\n        labelCol: {\n          xs: { span: 24 },\n          sm: { span: 5 },\n        },\n        wrapperCol: {\n          xs: { span: 24 },\n          sm: { span: 19 },\n        },\n      };\n      const tailFormItemLayout = {\n        wrapperCol: {\n          xs: {\n            span: 24,\n            offset: 0,\n          },\n          sm: {\n            span: 8,\n            offset: 8,\n          },\n        },\n      };\n      console.log(\"REGISTRATION STATWE\",this.props)\n      return (\n        <div>\n          <Form {...formItemLayout} onSubmit={this.handleSubmit}>\n            <Divider>About</Divider>\n            <Form.Item label=\"Profile Photo\">\n            {getFieldDecorator('ProfilePhoto', {\n            })(<Input />)}\n            </Form.Item>\n            <Form.Item label=\"Background About Photo\">\n            {getFieldDecorator('BackgroundPhoto', {\n            })(<Input />)}\n            </Form.Item>\n            <Form.Item label=\"Description\">\n            {getFieldDecorator('Description', {\n            })(<Input />)}\n            </Form.Item>\n            <Form.Item label=\"Footer Text\">\n            {getFieldDecorator('Footer', {\n            })(<Input />)}\n            </Form.Item>\n            <Divider>Social</Divider>\n            <p style={{textAlign:\"center\"}}>Leave black to disable</p>\n            <Form.Item label=\"Twitter\">\n            {getFieldDecorator('Twitter', {\n            })(<Input />)}\n            </Form.Item>\n            <Form.Item label=\"Instagram\">\n            {getFieldDecorator('Instagram', {\n            })(<Input />)}\n            </Form.Item>\n            <Form.Item label=\"Website\">\n            {getFieldDecorator('Website', {\n            })(<Input />)}\n            </Form.Item>\n            <Divider/>\n            <Form.Item {...tailFormItemLayout}>\n                <Button type=\"primary\" htmlType=\"submit\" style={{width:\"100%\"}}>\n                Save\n                </Button>\n            </Form.Item>\n        </Form>\n        </div>\n\n      );\n    }\n  }\nconst mapToProps = (state) =>{\n  console.log(\"SETTINGS:\",state.SettingsReducer);\n  const settings = state.SettingsReducer.profile\n  return {\n    settings\n  };\n}\n\nexport default connect(mapToProps)(Form.create({ name: 'register', mapPropsToFields(props) {\n  return {\n    ProfilePhoto: Form.createFormField({...props.username, value: props.settings.ProfilePhoto}),\n    BackgroundPhoto: Form.createFormField({...props.username, value: props.settings.BackgroundPhoto}),\n    Description: Form.createFormField({...props.username, value: props.settings.Description}),\n    Footer: Form.createFormField({...props.username, value: props.settings.Footer}),\n    Twitter: Form.createFormField({...props.username, value: props.settings.Twitter}),\n    Instagram: Form.createFormField({...props.username, value: props.settings.Instagram}),\n    Website: Form.createFormField({...props.email, value: props.settings.Website}),\n  };\n}})(ProfileForm));\n","import React from 'react';\nimport { Tag, Input, Tooltip, Icon } from 'antd';\n\nexport default class EditableTagGroup extends React.Component {\n  constructor(props){\n    super(props)\n      this.state = {\n        tags: [],\n        removedTags: [],\n        inputVisible: false,\n        inputValue: '',\n      };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState){\n    if(nextProps.value === undefined || nextProps.value === null){return null}\n    let intersection = nextProps.value.filter(x => !prevState.removedTags.includes(x));\n    console.log(\"NEW PROPS\", nextProps.value, prevState.removedTags, intersection)\n    \n      return { tags: intersection }\n   \n  }\n\n  handleClose = removedTag => {\n    const tags = this.state.tags.filter(tag => tag !== removedTag);\n    console.log(\"CLOS TAG\", tags);\n    this.setState({ tags,\n      removedTags: this.state.removedTags.concat(removedTag)\n    });\n    this.props.onChange(tags)\n  };\n\n  showInput = () => {\n    this.setState({ inputVisible: true }, () => this.input.focus());\n  };\n\n  handleInputChange = e => {\n    this.setState({ inputValue: e.target.value });\n  \n  };\n\n  handleInputConfirm = () => {\n    const { inputValue } = this.state;\n    let { tags } = this.state;\n    if (inputValue && tags.indexOf(inputValue) === -1) {\n      tags = [...tags, inputValue];\n    }\n    this.setState({\n      tags,\n      inputVisible: false,\n      inputValue: '',\n    });\n    console.log(\"Received values of form\",tags, this.state)\n    this.props.onChange(tags)\n  };\n\n  saveInputRef = input => (this.input = input);\n\n  render() {\n    const { tags, inputVisible, inputValue } = this.state;\n    return (\n      <div>\n        {tags.map((tag, index) => {\n          const isLongTag = tag.length > 20;\n          const tagElem = (\n            <Tag key={tag} closable={true} onClose={() => this.handleClose(tag)}>\n              {isLongTag ? `${tag.slice(0, 20)}...` : tag}\n            </Tag>\n          );\n          return isLongTag ? (\n            <Tooltip title={tag} key={tag}>\n              {tagElem}\n            </Tooltip>\n          ) : (\n            tagElem\n          );\n        })}\n        {inputVisible && (\n          <Input\n            ref={this.saveInputRef}\n            type=\"text\"\n            size=\"small\"\n            style={{ width: 78 }}\n            value={inputValue}\n            onChange={this.handleInputChange}\n            onBlur={this.handleInputConfirm}\n            onPressEnter={this.handleInputConfirm}\n          />\n        )}\n        {!inputVisible && (\n          <Tag onClick={this.showInput} style={{ background: '#141414', borderStyle: 'dashed' }}>\n            <Icon type=\"plus\" /> New Tag\n          </Tag>\n        )}\n      </div>\n    );\n  }\n}","import React from 'react';\nimport {\n    Form,\n    Input,\n    Select,\n    InputNumber,\n    Divider,\n    Button,\n  } from 'antd';\n  import EditableTagGroup from './EditableTagGroup';\n \n  import { connect } from 'react-redux';\n  import { settingsActions } from '../../store/actions';\n\n  const { Option } = Select;\n\n  class SettingsForm extends React.Component {\n    state = {\n      confirmDirty: false,\n      autoCompleteResult: [],\n    };\n  \n    handleSubmit = e => {\n      e.preventDefault();\n      this.props.form.validateFieldsAndScroll((err, values) => {\n        if (!err) {\n          console.log('Received values of form: ', values);\n          this.props.dispatch(settingsActions.setGallery(values))\n        }\n      });\n    };\n  \n    handleConfirmBlur = e => {\n      const { value } = e.target;\n      this.setState({ confirmDirty: this.state.confirmDirty || !!value });\n    };\n  \n    compareToFirstPassword = (rule, value, callback) => {\n      const { form } = this.props;\n      if (value && value !== form.getFieldValue('password')) {\n        callback('Two passwords that you enter is inconsistent!');\n      } else {\n        callback();\n      }\n    };\n  \n    validateToNextPassword = (rule, value, callback) => {\n      const { form } = this.props;\n      if (value && this.state.confirmDirty) {\n        form.validateFields(['confirm'], { force: true });\n      }\n      callback();\n    };\n  \n    handleWebsiteChange = value => {\n      let autoCompleteResult;\n      if (!value) {\n        autoCompleteResult = [];\n      } else {\n        autoCompleteResult = ['.com', '.org', '.net'].map(domain => `${value}${domain}`);\n      }\n      this.setState({ autoCompleteResult });\n    };\n  \n    render() {\n      const { getFieldDecorator } = this.props.form;\n\n      const formItemLayout = {\n        labelCol: {\n          xs: { span: 24 },\n          sm: { span: 5 },\n        },\n        wrapperCol: {\n          xs: { span: 24 },\n          sm: { span: 19 },\n        },\n      };\n      const tailFormItemLayout = {\n        wrapperCol: {\n          xs: {\n            span: 24,\n            offset: 0,\n          },\n          sm: {\n            span: 19,\n            offset: 5,\n          },\n        },\n      };\n      return (\n        <Form {...formItemLayout} onSubmit={this.handleSubmit}>\n          <Form.Item label=\"Gallery Name\">\n            {getFieldDecorator('Name', {\n            })(<Input />)}\n          </Form.Item>\n          <Form.Item label=\"Gallery Url\">\n            {getFieldDecorator('Url', {\n            })(<Input />)}\n          </Form.Item>\n          <Form.Item label=\"Images Per Page\">\n            {getFieldDecorator('ImagesPerPage', {\n            })(<InputNumber min={1} max={100} style={{width:\"100%\"}}/>)}\n          </Form.Item>\n          <Form.Item label=\"Image Folder\">\n            {getFieldDecorator('Basepath', {\n            })(<Input />)}\n          </Form.Item>\n          <Form.Item label=\"Image Blacklist\">\n            {getFieldDecorator('PictureBlacklist', {\n            })(<EditableTagGroup  />)}\n          </Form.Item>\n          <Form.Item label=\"Collection Blacklist\">\n            {getFieldDecorator('AlbumBlacklist', {\n            })(<EditableTagGroup/>)}\n          </Form.Item>\n          <Form.Item label=\"Renderer\">\n            {getFieldDecorator('Renderer', {\n            })( <Select>\n            <Option value=\"imagemagick\">Imagemagick</Option>\n            <Option value=\"navive\">Native</Option>\n          </Select>)}\n          </Form.Item>\n          <Divider/>\n          <Form.Item {...tailFormItemLayout}>\n            <Button type=\"primary\" htmlType=\"submit\" style={{width:\"100%\"}}>\n              Save\n            </Button>\n          </Form.Item>\n          \n        </Form>\n      );\n    }\n  }\n\nconst mapToProps = (state) =>{\n  console.log(\"SETTINGS:\",state.SettingsReducer);\n  const settings = state.SettingsReducer.gallery\n  return {\n    settings\n  };\n}\nexport default connect(mapToProps)(Form.create({ name: 'settings', mapPropsToFields(props) {\n  return {\n    Name: Form.createFormField({...props.username, value: props.settings.Name}),\n    Basepath: Form.createFormField({...props.username, value: props.settings.Basepath}),\n    Url: Form.createFormField({...props.username, value: props.settings.Url}),\n    ImagesPerPage: Form.createFormField({...props.username, value: props.settings.ImagesPerPage}),\n    PictureBlacklist: Form.createFormField({...props.username, value: props.settings.PictureBlacklist || []}),\n    AlbumBlacklist: Form.createFormField({...props.username, value: props.settings.AlbumBlacklist || []}),\n    Renderer: Form.createFormField({...props.email, value: props.settings.Renderer}),\n  };\n}})(SettingsForm));","import React from 'react';\nimport {\n    Icon,\n    message,\n    Row,\n    Col,\n    Upload,\n    Button,\n    Modal,\n  } from 'antd';\n  import { connect } from 'react-redux';\n  import { taskActions } from '../../store/actions';\n  import {config} from \"../../store\";\n  const { confirm } = Modal;\n  class Maintenance extends React.Component {\n\n    state = {\n      fileList: [\n      ],\n    };\n    \n    showResacanConfirm = () => {\n      let _this = this;\n      confirm({\n        title: 'Are you sure you want to run the rescan task?',\n        okText: 'Yes',\n        okType: 'danger',\n        cancelText: 'No',\n        onOk() {\n          _this.props.dispatch(taskActions.purge())\n        },\n        onCancel() {\n          console.log('Cancel');\n        },\n      });\n    }\n    showClearConfirm = () => {\n      let _this = this;\n      confirm({\n        title: 'Are you sure you want to run the clear task?',\n        okText: 'Yes',\n        okType: 'danger',\n        cancelText: 'No',\n        onOk() {\n          _this.props.dispatch(taskActions.clear())\n        },\n        onCancel() {\n          console.log('Cancel');\n        },\n      });\n    }\n    \n    render() {\n      const {dispatch} = this.props\n      let _this = this;\n      const props = {\n        name: 'file',\n        action: config.baseUrl+\"/tasks/upload\",\n        headers: {Authorization:localStorage.getItem('token')},\n        className:\"maintenance\",\n        \n        onChange(info) {\n          if (info.file.status !== 'uploading') {\n            console.log(info.file, info.fileList);\n          }\n          if (info.file.status === 'done') {\n            message.success(`${info.file.name} file uploaded successfully`);\n            info.fileList=[]\n          } else if (info.file.status === 'error') {\n            message.error(`${info.file.name} file upload failed.`);\n          }\n          let fileList = [...info.fileList];\n          fileList = fileList.slice(-2);\n          fileList = fileList.map(file => {\n              if (file.response) {\n              file.url = file.response.url;\n              }\n              return file;\n          });\n          _this.setState({ fileList });\n        },\n      };\n      return (\n        <Row gutter={[16,16]}>\n          <Col span={12}>\n            <Button type=\"default\" icon=\"sync\" size=\"large\" style={{\"width\":\"100%\"}} onClick={this.showResacanConfirm}> Resacan image folder </Button>\n          </Col>\n          <Col span={12}>\n            <Button type=\"default\" icon=\"delete\" size=\"large\" style={{\"width\":\"100%\"}} onClick={this.showClearConfirm} > Clear cache </Button><br/>\n          </Col>\n          <Col span={12}>\n            <Button type=\"default\" icon=\"download\" size=\"large\" style={{\"width\":\"100%\"}} onClick={() => dispatch(taskActions.backup())}> Backup Database </Button><br/>\n          </Col>\n          <Col span={12}>\n          <Upload {...props} fileList={this.state.fileList}>\n            <Button type=\"default\" size=\"large\" style={{\"width\":\"100%\"}}>\n              <Icon type=\"upload\" /> Restore Database\n            </Button>\n          </Upload>\n            </Col>\n        </Row>\n      );\n    }\n  }\n\nconst mapToProps = (state) =>{\n  console.log(\"SETTINGS:\",state.SettingsReducer);\n  const settings = state.SettingsReducer.gallery\n  return {\n    settings\n  };\n}\nexport default connect(mapToProps)(Maintenance);","import React from 'react';\nimport {\n    Form,\n    Input,\n    Divider,\n    Button,\n    Tree,\n    Row, \n    Col,\n    Select\n  } from 'antd';\n  import { connect } from 'react-redux';\n  import { collectionActions } from '../../store/actions';\n  import {formatTree, IDFromTree} from '../../store'\n  import {notify} from '../../store/actions';\n  const { DirectoryTree } = Tree;\n  const { Option } = Select;\n\n  class AlbumSettings extends React.Component {\n    state = {\n      confirmDirty: false,\n      autoCompleteResult: [],\n      auth: {username:\"\"},\n      albumName: \"\",\n      albumPic: \"\",\n      albumID: \"\"\n    };\n \n    handleSubmit = e => {\n      e.preventDefault();\n      if( this.state.albumID === \"\"){\n        notify(\"warning\", \"Please Select album\")\n        return;\n      }\n      this.props.dispatch(collectionActions.update({\n        id: this.state.albumID,\n        name: this.state.albumName,\n        profile_image: this.state.albumPic\n      }))\n    };\n\n    onTreeSelect = (selectedKeys, info) => {\n      //console.log('selected',selectedKeys, info);\n      let alb = IDFromTree(this.props.collections, selectedKeys[\"0\"])\n      this.setState({\n        \"albumName\": alb.name,\n        \"albumPic\": alb.profile_image,\n        \"albumID\": alb.id\n      })\n      console.log('selected', alb);\n    };\n  \n    handleConfirmBlur = e => {\n      const { value } = e.target;\n      this.setState({ confirmDirty: this.state.confirmDirty || !!value });\n    };\n  \n    compareToFirstPassword = (rule, value, callback) => {\n      const { form } = this.props;\n      form.validateFields(['password'], { force: true });\n      if (value && value !== form.getFieldValue('password')) {\n        callback('Two passwords that you enter is inconsistent!');\n      } else {\n        callback();\n      }\n    };\n\n    onChange = (value) => {\n      this.setState({\"albumPic\": value })\n    }\n  \n    updateAlbumName = (evt) => {\n      this.setState({\n        \"albumName\": evt.target.value\n      })\n    }\n    validateToNextPassword = (rule, value, callback) => {\n      const { form } = this.props;\n      if (value && this.state.confirmDirty) {\n        form.validateFields(['confirm'], { force: true });\n      }\n      if (value && value !== form.getFieldValue('confirm')) {\n        callback('Two passwords that you enter is inconsistent!');\n      } else {\n        callback();\n      }\n    };\n  \n    handleWebsiteChange = value => {\n      let autoCompleteResult;\n      if (!value) {\n        autoCompleteResult = [];\n      } else {\n        autoCompleteResult = ['.com', '.org', '.net'].map(domain => `${value}${domain}`);\n      }\n      this.setState({ autoCompleteResult });\n    };\n  \n    render() {\n      const formItemLayout = {\n        labelCol: {\n          xs: { span: 24 },\n          sm: { span: 5 },\n        },\n        wrapperCol: {\n          xs: { span: 24 },\n          sm: { span: 19 },\n        },\n      };\n      const tailFormItemLayout = {\n        wrapperCol: {\n          xs: {\n            span: 24,\n            offset: 0,\n          },\n          sm: {\n            span: 8,\n            offset: 8,\n          },\n        },\n      };\n      \n      formatTree(this.props.collections)\n      const collections = Object.values(this.props.collections)\n      return (\n        <Row>\n          <Col span={8} style={{\"overflowY\": \"auto\",\"maxHeight\": \"500px\"}} >\n            <DirectoryTree\n              className=\"draggable-tree\"\n              defaultExpandedKeys={this.state.expandedKeys}\n              blockNode\n              onSelect={this.onTreeSelect}\n              treeData={collections}\n            />\n          </Col>\n          <Col span={16} style={{\"paddingLeft\":\"30px\"}}>\n            <Form {...formItemLayout} onSubmit={this.handleSubmit}>\n              < Divider/>\n              <Form.Item label=\"Album Name\">\n                <Input value={this.state.albumName}  name=\"albumName\" onChange={this.updateAlbumName}/>\n              </Form.Item>\n              <Form.Item label=\"Album Image id\">\n                <Select\n                  showSearch\n                  placeholder=\"Select a photo\"\n                  optionFilterProp=\"children\"\n                  onChange={this.onChange}\n                  value={this.state.albumPic} \n                  filterOption={(input, option) =>\n                    option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                  }\n                >\n                {this.props.photos.map((el, index) => (<Option key={el.id}>{el.name}</Option> ))}\n                </Select>\n              </Form.Item>\n\n              \n\n              <Divider/>\n              <Form.Item {...tailFormItemLayout}>\n                <Button type=\"primary\" htmlType=\"submit\" style={{width:\"100%\"}}>\n                  Update\n                </Button>\n              </Form.Item>\n            </Form>\n          </Col>\n        </Row>\n      );\n    }\n  }\nconst mapToProps = (state) =>{\n  console.log(\"REG\",state.UserReducer);\n  const auth = state.UserReducer;\n  const photos = state.PhotoReducer.photos;\n  const collections = state.CollectionsReducer.collections\n  return {\n    auth,\n    collections,\n    photos\n  };\n}\n\nexport default connect(mapToProps)(Form.create({ name: 'register', mapPropsToFields(props) {\n  return {\n    username: Form.createFormField({...props.username, value: props.auth.username}),\n    email: Form.createFormField({...props.email, value: props.auth.email}),\n  };\n}})(AlbumSettings));\n","import React from 'react';\nimport './Main.css';\nimport { Layout, Statistic, Card, Icon, Row, Col}  from 'antd';\nimport { connect } from 'react-redux';\nimport Header from '../components/header'\nimport RegistrationForm from '../components/settings/RegistrationForm'\nimport ProfileForm from '../components/settings/ProfileForm'\nimport SettingsForm from '../components/settings/SettingsForm'\nimport Maintenance from '../components/settings/maintenance'\nimport AlbumSettings from '../components/settings/AlbumSettings'\nimport { settingsActions } from '../store/actions/settings';\n\nconst { Content } = Layout;\nconst tabListNoTitle = [\n  {\n    key: 'user',\n    tab: <span><Icon style={{\"margin-right\":\"5px\"}}  type=\"user\" /> User Settings</span>,\n  },\n  {\n    key: 'profile',\n    tab: <span><Icon style={{\"margin-right\":\"5px\"}}  type=\"profile\" /> Profile Settings</span>,\n  },\n  {\n    key: 'settings',\n    tab: <span><Icon style={{\"margin-right\":\"5px\"}}  type=\"setting\" />Site Settings</span>,\n  },\n  {\n    key: 'album',\n    tab: <span><Icon style={{\"margin-right\":\"5px\"}}  type=\"folder-open\" />Album Settings</span>,\n  },\n  {\n    key: 'maintenance',\n    tab: <span><Icon style={{\"margin-right\":\"5px\"}}  type=\"tool\" /> Maintenance</span>,\n  },\n];\n\nconst contentListNoTitle = {\n  user: <RegistrationForm/>,\n  profile: <ProfileForm/>,\n  settings: <SettingsForm/>,\n  album: <AlbumSettings/>,\n  maintenance: <Maintenance/>\n};\n\nclass Settings extends React.PureComponent {\n  constructor() {\n    super();\n    this.state = {\n      key: 'tab1',\n      noTitleKey: 'settings',\n    };\n  }\n\n  componentDidMount() {\n    this.props.dispatch(settingsActions.all());\n  }\n  \n  onTabChange = (key, type) => {\n    console.log(key, type);\n    this.setState({ [type]: key });\n  };\n\n  render() {\n    console.log(\"STATS\", this.props.stats)\n    return (\n      <Layout style={{ minHeight: '100vh' }}>\n        <Header/>\n        <Layout>\n          <Content style={{ padding: '50px' }}>\n            <Row gutter={16}>\n              <Col span={8}>\n                <Card>\n                  <Statistic\n                    value={this.props.stats.Photos}\n                    precision={2}\n                    valueStyle={{ textAlign: \"center\" }}\n                    prefix={<Icon style={{\"margin-right\":\"5px\"}} type=\"picture\" />}\n                  />\n                </Card>\n              </Col>\n              <Col span={8}>\n                <Card>\n                  <Statistic\n                    value={this.props.stats.Albums}\n                    precision={2}\n                    valueStyle={{ textAlign: \"center\" }}\n                    prefix={<Icon style={{\"margin-right\":\"5px\"}}  type=\"folder-open\" />}\n                    />\n                </Card>\n              </Col>\n              <Col span={8}>\n                <Card>\n                  <Statistic\n                    value={this.props.stats.Rubish}\n                    precision={2}\n                    valueStyle={{ textAlign: \"center\" }}\n                    prefix={<Icon style={{\"margin-right\":\"5px\"}}  type=\"delete\" />}\n                  />\n                </Card>\n              </Col>\n              {/* <Col span={4}>\n                <Card>\n                  <Statistic\n                    value={this.props.stats.ProcessQue}\n                    precision={2}\n                    valueStyle={{ textAlign: \"center\" }}\n                    prefix={<Icon style={{\"margin-right\":\"5px\"}}  type=\"code\" />}\n                  />\n                </Card>\n              </Col>\n              <Col span={4}>\n                <Card>\n                  <Statistic\n                    value={this.props.stats.ViewCount}\n                    precision={2}\n                    valueStyle={{ textAlign: \"center\" }}\n                    prefix={<Icon style={{\"margin-right\":\"5px\"}}  type=\"eye\" />}\n                  />\n                </Card>\n              </Col>\n              <Col span={4}>\n                <Card>\n                  <Statistic\n                    value={this.props.stats.Albums}\n                    precision={2}\n                    valueStyle={{ textAlign: \"center\" }}\n                    prefix={<Icon style={{\"margin-right\":\"5px\"}} type=\"delete\" />}\n                  />\n                </Card>\n              </Col>\n              <Col span={4}>\n                <Card>\n                  <Statistic\n                    value={this.props.stats.Albums}\n                    precision={2}\n                    valueStyle={{ textAlign: \"center\" }}\n                    prefix={<Icon style={{\"margin-right\":\"5px\"}} type=\"delete\" />}\n                  />\n                </Card>\n              </Col> */}\n            </Row>\n            <Card\n              style={{ width: '100%', marginTop:\"20px\"}}\n              tabList={tabListNoTitle}\n              activeTabKey={this.state.noTitleKey}\n              bodyStyle={{backgroundColor:\"#000\"}}\n              onTabChange={key => {\n                this.onTabChange(key, 'noTitleKey');\n              }}\n            >\n            {contentListNoTitle[this.state.noTitleKey]}\n            </Card>\n          </Content>\n        </Layout>\n      </Layout>\n    );\n  }\n}\n\nconst mapToProps = (state) =>{\n  const photos = state.PhotoReducer.photos;\n  const dates = state.CollectionsReducer.dates\n  const uploadDates = state.CollectionsReducer.uploadDates\n  const collections = state.CollectionsReducer.collections\n  const stats = state.SettingsReducer.stats\n  return {\n    stats,\n    photos,\n    dates,\n    collections,\n    uploadDates\n  };\n}\n\nexport default connect(mapToProps)(Settings);","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux';\n\nimport { history } from './store'\nimport store from './store'\nimport { connect } from 'react-redux';\nimport {\n  Router,\n  Route,\n  Redirect\n} from 'react-router-dom'\n\nimport { userActions } from './store/actions';\n\nimport Main from './pages/Main';\nimport Login from './pages/Login';\nimport Settings from './pages/Settings'\n\n\nconst PrivateRoute = ({ component: Component, ...rest }) => (\n  <Route {...rest} render={props => (\n    localStorage.getItem('token')\n      ? <Component {...props} />\n      : <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\n  )} />\n)\n\n\nconst NoMatch = ({ location }) => (\n  <Redirect to=\"/\" />\n)\n\nclass AppComponent extends React.Component {\n  state = {\n    timer: null,\n    counter: 0\n  };\n  componentDidMount() {\n    let timer = setInterval(this.tick, 20000);\n    this.setState({ timer });\n  }\n  componentWillUnmount() {\n    clearInterval(this.state.timer);\n  }\n  tick = () => {\n   \n    if(localStorage.getItem('token')){\n     // console.log(\"calling\")\n      this.props.dispatch(userActions.reauth());\n    }\n    \n  }\n  render() {\n  return(\n        <main>\n          <Router history={history}>\n            <PrivateRoute path=\"/\" component={Main} exact />\n            <Route path=\"/login\" component={Login} />\n            <PrivateRoute path=\"/settings\" component={Settings} />\n            <Route component={NoMatch} />\n          </Router>\n        </main >\n    )\n  }\n}\nconst mapStateToProps = (state) =>{return {state}}\nlet App = connect(mapStateToProps)(AppComponent)\n\n\nReactDOM.render(<Provider store={store()}><App /></Provider>, document.getElementById('app_root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}